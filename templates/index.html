<!DOCTYPE html>
<html>
	<head>
        <meta charset="utf-8" />
		<title>Index</title>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.16.0/jquery.validate.min.js"></script>
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css">
        <script type="text/javascript">
            $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
        </script>
	</head>
	<body>
        <div class="ui-widget">
            <form>
                <select id="year_select">
                    <option value="2009">2009</option>
                    <option value="2010">2010</option>
                    <option value="2011">2011</option>
                    <option value="2012">2012</option>
                    <option value="2013">2013</option>
                    <option value="2013">2013</option>
                    <option value="2014">2014</option>
                    <option value="2015">2015</option>
                    <option value="2016" selected>2016</option>
                </select>
                <input type="text" id="playerName">
            </form>
        </div>
	</body>
    <script>
        $(function() {
            $("#playerName").autocomplete({
                source: function(request, response) {
                    var year = $("#year_select").val();
                    console.log(year);
                    $.getJSON($SCRIPT_ROOT + "/_search_by_year/" + year, {
                        name: request.term
                    }, function(data) {
                        console.log(data);
                        console.log(data.matching_results);
                        response(data.matching_results);
                    });
                },
                minLength: 2,
                select: function(event, ui) {
                    console.log(ui.item.value);
                    console.log(ui.item.id);
                }
            });
        });
    </script>
</html>
